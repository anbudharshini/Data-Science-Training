# Python package
# Create and test a Python package on multiple Python versions.
# Add steps that analyze code, save the dist with the build record, publish to a PyPI-compatible index, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/python

trigger: none  

schedules:
  - cron: "0 6 * * 1"   
    always: true
    branches:
      include:
        - main

pool:
  vmImage: "ubuntu-latest"

steps:
  - task: UsePythonVersion@0
    inputs:
      versionSpec: '3.10'

  - script: |
      pip install pandas numpy matplotlib
      python attendance_report.py
    displayName: "Run Attendance Processing Script"

  - task: PublishBuildArtifacts@1
    inputs:
      PathtoPublish: "reports/"
      ArtifactName: "AttendanceReport"
      publishLocation: "Container"
